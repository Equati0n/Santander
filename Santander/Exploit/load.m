#import <Foundation/Foundation.h>
#import <UIKit/UIKit.h>
#import "grant_full_disk_access.h"

static void __attribute__((constructor)) _init_(){
    if ([[UIDevice currentDevice].systemVersion floatValue] >= 15.5 && [[UIDevice currentDevice].systemVersion floatValue] < 16.2) {
    dispatch_async(dispatch_get_main_queue(), ^{
        UIWindow *window = [UIApplication sharedApplication].keyWindow;

        UIAlertController *alert = [UIAlertController alertControllerWithTitle:@"Santander ios16.0-16.1.2" message:@"Powered By @Summit" preferredStyle:UIAlertControllerStyleAlert];

        [alert addAction:[UIAlertAction actionWithTitle:@"我知道了" style:UIAlertActionStyleDefault handler:nil]];

        [[window rootViewController] presentViewController:alert animated:YES completion:nil];
    });
    grant_full_disk_access(^(NSError* _Nullable error){
        if (error) {
            NSLog(@"Error: %@", error);
        } else {
            NSLog(@"Success!");
        }
    });
    }
    else{
        dispatch_async(dispatch_get_main_queue(), ^{
            UIWindow *window = [UIApplication sharedApplication].keyWindow;

            UIAlertController *alert = [UIAlertController alertControllerWithTitle:@"Santander" message:@"Powered By @Summit\n请在设置中打开RootHelper" preferredStyle:UIAlertControllerStyleAlert];

            [alert addAction:[UIAlertAction actionWithTitle:@"我知道了" style:UIAlertActionStyleDefault handler:nil]];

            [[window rootViewController] presentViewController:alert animated:YES completion:nil];
        });
    }
}

